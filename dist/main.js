(()=>{var e={138:e=>{var t=requre("./xml2json.js");function r(e,t,r,s,i,o){this.ajaxURL=e,this.senderid=t||"null",this.senderpwd=r||"null",this.controlid=s||"controlid",this.uniqueid=i||"false",this.dtdversion=o||"3.0",this.lastRequest="",this.lastResponse="",!e&&window.gSess&&(this.sessionid=window.gSess,this.ajaxURL="../xml/ajaxgw.phtml?.sess="+window.gSess)}function s(e,t){if(!e)return null;var r=e.indexOf("<"+t+">");if(r<0)return null;r+=2+t.length;var s=e.indexOf("</"+t+">",r);return s<0?null:e.substring(r,s)}r.prototype.ip_setCredentials=function(e,t,r,s,i){this.companyid=e,this.userid=t,this.password=r,this.clientid=s||"",this.locationid=i||"",e&&t&&r&&(this.sessionid=null)},r.prototype.ip_setSessionID=function(e){this.sessionid=e,this.ajaxURL="../xml/ajaxgw.phtml?.sess="+e},r.prototype.ip_getLastRequest=function(){return this.lastRequest},r.prototype.ip_setErrorProc=function(e){this.errorProc=e},r.prototype.ip_read=function(e,t,r,s,i,o){var n="<read>"+this.xmlNode("object",e)+this.xmlNode("fields",t)+this.xmlNode("keys",r)+this.xmlNode("returnFormat",s)+this.xmlNode("docparid",i)+"</read>";this.sendRequest(n,o)},r.prototype.ip_readByName=function(e,t,r,s,i){var o="<readByName>"+this.xmlNode("object",e)+this.xmlNode("fields",t)+this.xmlNode("keys",r)+this.xmlNode("returnFormat",s)+"</readByName>";this.sendRequest(o,i)},r.prototype.ip_readByQuery=function(e,t,r,s,i,o,n,a){try{var d="<readByQuery>"+this.xmlNode("object",e)+this.xmlNode("fields",t)+this.xmlNode("query",r)+this.xmlNode("pagesize",s)+this.xmlNode("returnFormat",i);if(null!=a&&(d+=this.xmlNode("docparid",a)),d+="</readByQuery>",n)return this.sendRequestWithPromise(d);this.sendRequest(d,o)}catch(e){if(n)return jq.Deferred().reject(e);throw e}},r.prototype.ip_readView=function(e,t,r,s,i){var o="<readView>"+this.xmlNode("view",e)+(null!=r?this.xmlNode("pagesize",r):"")+(null!=s?this.xmlNode("returnFormat",s):"")+(null!=t?this.processFields({filters:t}):"")+"</readView>";this.sendRequest(o,i)},r.prototype.ip_readMore=function(e,t,r){var s="<readMore>"+this.xmlNode(null==r?"object":r,e)+"</readMore>";this.sendRequest(s,t)},r.prototype.ip_readMoreObject=function(e,t){this.ip_readMore(e,t,"object")},r.prototype.ip_readMoreView=function(e,t){this.ip_readMore(e,t,"view")},r.prototype.ip_readRelated=function(e,t,r,s,i,o){var n="<readRelated>"+this.xmlNode("object",e)+this.xmlNode("keys",t)+this.xmlNode("relation",r)+this.xmlNode("fields",s)+this.xmlNode("returnFormat",i)+"</readRelated>";this.sendRequest(n,o)},r.prototype.ip_create=function(e,t,r){var s="<create><"+e+">";s+=this.processFields(t),s+="</"+e+"></create>",this.sendRequest(s,r)},r.prototype.ip_createXML=function(e,t){var r="<create>"+e+"</create>";this.sendRequest(r,t)},r.prototype.ip_update=function(e,t,r){var s="<update><"+e+">";s+=this.processFields(t),s+="</"+e+"></update>",this.sendRequest(s,r)},r.prototype.ip_updateXML=function(e,t){var r="<update>"+e+"</update>";this.sendRequest(r,t)},r.prototype.ip_delete=function(e,t,r){var s="<delete>"+this.xmlNode("object",e)+this.xmlNode("keys",t)+"</delete>";this.sendRequest(s,r)},r.prototype.ip_inspect=function(e,t,r){var s=(t?'<inspect detail="1">':"<inspect>")+this.xmlNode("object",e)+"</inspect>";this.sendRequest(s,r)},r.prototype.getXMLHTTPRequest=function(){var e=!1;if(window.XMLHttpRequest)e=new XMLHttpRequest;else if("undefined"!=typeof ActiveXObject)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){e=!1}}return e},r.prototype.xmlEncode=function(e){return e?(e=String(e)).replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\'/g,"&apos;").replace(/\"/g,"&quot;"):""},r.prototype.xmlNode=function(e,t){return e?"<"+e+">"+this.xmlEncode(t)+"</"+e+">":""},r.prototype.getRecHeader=function(){var e='<?xml version="1.0" encoding="UTF-8"?><request>';return e+="<control><senderid>"+this.xmlEncode(this.senderid)+"</senderid><password>"+this.xmlEncode(this.senderpwd)+"</password><controlid>"+this.xmlEncode(this.controlid)+"</controlid><uniqueid>"+this.xmlEncode(this.uniqueid)+"</uniqueid><dtdversion>"+this.xmlEncode(this.dtdversion)+"</dtdversion></control>",e+="<operation>",e+="<authentication>",this.sessionid?e+=this.xmlNode("sessionid",this.sessionid):(e+="<login>",e+=this.xmlNode("userid",this.userid),e+=this.xmlNode("companyid",this.companyid),e+=this.xmlNode("password",this.password),this.clientid&&(e+=this.xmlNode("clientid",this.clientid)),this.locationid&&(e+=this.xmlNode("locationid",this.locationid)),e+="</login>"),(e+="</authentication>")+'<content><function controlid="'+this.xmlEncode(this.controlid)+'">'},r.prototype.getRecFooter=function(){return"</function></content></operation></request>"},r.prototype.sendRequest=function(e,t){var r=this.getRecHeader()+e+this.getRecFooter();this.lastRequest=r;var s=this.getXMLHTTPRequest();if(!s)throw"Cannot create XMLHTTPRequest";var i=this.checkError,o=this.errorProc?this.errorProc:function(e){alert(GT("IA.ERROR")+": "+e)};s.onreadystatechange=function(){if(4==s.readyState){if(i(s.responseText,o))return;t&&t(s.responseText)}};var n=this.ajaxURL;s.open("POST",n,!1);var a="xmlrequest="+encodeURIComponent(r);s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.setRequestHeader("Content-length",a.length),s.setRequestHeader("Connection","close"),s.send(a)},r.prototype.sendRequestWithPromise=function(e,r,s,i){if(Array.isArray(e))var o="header"!=s,n="header"==s||"none"==s,a=this.getRecHeader(r,o)+this.getRecContent(e,n)+this.getRecFooter(o);else o="content"==s||"none"==s,a=this.getRecHeader(r,o)+e+this.getRecFooter(o);this.lastRequest=a;var d=this.getXMLHTTPRequest();if(!d)throw"Cannot create XMLHTTPRequest";var c=this.ajaxURL;d.open("POST",c,!1);var l="xmlrequest="+encodeURIComponent(a);if(d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),d.send(l),4==d.readyState){var p=null;if(0!=i&&null!=i||(p=this.getErrorMessage(d.responseText)),null!=p)return{type:"error",message:p};var u=t.parse(d.responseText);if(null==u&&(u=JSON.parse(d.responseText)),0==i||null==i)try{if(!Array.isArray(u.response.operation.result)&&"failure"==u.response.operation.result.status)return"Unknown error occurred contacting Intacct on function"}catch(e){}return{type:"success",message:u}}},r.prototype.getErrorMessage=function(e){this.lastResponse=new String(e);var t,r,i,o=s(e,"errormessage");if(!o)return null;parser=new DOMParser,xmlDoc=parser.parseFromString(e,"text/xml");var n=xmlDoc.getElementsByTagName("error"),a=Array.from(n),d=a.length>1?"Multiple errors exist - the first one is being presented\n":"",c=new Array;a.forEach(((e,s)=>{if(null!=e.children){for(var o={},n=0;n<e.children.length;n++)o[e.children[n].tagName]=e.children[n].textContent;c.push(o)}t=c[0].description,r=c[0].description2,i=c[0].correction,c[0].errorno})),null!=this.logger&&(this.logger.writeEntry("ERROR => Intacct API Errors Occurred ("+c.length+" Total) :"),c.forEach(((e,t)=>{var r=t+1;this.logger.writeEntry("-- Intacct Error #"+r+" --"),this.logger.writeEntry("desc: "+e.description),this.logger.writeEntry("desc2: "+e.description2),this.logger.writeEntry("corr: "+e.correction),this.logger.writeEntry("errno: "+e.errorno),this.logger.addError("desc: "+e.description+" | desc2: "+e.description2+" | corr: "+e.correction+" | errno: "+e.errorno)}))),t||r||i?(message="",d&&(message=message+d+"\n"),t&&(message=message+t+"\n\n"),r&&(message=message+r+"\n\n"),i&&(message=message+i+"\n\n")):message=o;var l=document.createElement("textarea");return l.innerHTML=message,l.value.trim()},r.prototype.checkError=function(e,t){this.lastResponse=new String(e);var r=s(e,"errormessage");if(!r)return!1;var i=s(r,"description"),o=s(r,"description2"),n=s(r,"correction");i||o||n?(message="",i&&(message=message+i+"\n\n"),o&&(message=message+o+"\n\n"),n&&(message=message+n+"\n\n")):message=r;var a=document.createElement("textarea");return a.innerHTML=message,t&&t(a.value.trim()),!0},r.prototype.processFields=function(e){var t="";if(e instanceof Array)for(var r=0;r<e.length;r++)t+=this.processOneField(e,r);else for(var r in e)t+=this.processOneField(e,r);return t},r.prototype.processOneField=function(e,t){var r="",s=t,i=e instanceof Array,o=e[t],n=typeof o;return null==o?r:r+="object"==n||"array"==n?i?this.processFields(o):"<"+s+">"+this.processFields(o)+"</"+s+">":this.xmlNode(s,o)},e.exports={API_Internal_Session:r,util_getXmlNodeText:s}}},t={};!function r(s){var i=t[s];if(void 0!==i)return i.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,r),o.exports}(138)})();